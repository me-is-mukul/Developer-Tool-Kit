#!/bin/bash

DIR="$(pwd)"
HOME_DIR="$HOME"
USERNAME="$(basename "$HOME_DIR")"

BLUE="\e[34m"
CYAN="\e[36m"
MAGENTA="\e[35m"
GREEN="\e[32m"
BOLD="\e[1m"
RESET="\e[0m"

print_tree() {
    local path="$1"
    local prefix="$2"

    local entries=("$path"/*)
    local total=${#entries[@]}
    local index=0

    for entry in "${entries[@]}"; do
        ((index++))

        if [[ $index -eq $total ]]; then
            branch="‚îî‚îÄ‚îÄ"
            new_prefix="$prefix    "
        else
            branch="‚îú‚îÄ‚îÄ"
            new_prefix="$prefix‚îÇ   "
        fi

        if [[ -d "$entry" ]]; then
            echo -e "${prefix}${branch} ${BLUE}üìÅ ${BOLD}$(basename "$entry")${RESET}"
        elif [[ -f "$entry" ]]; then
            echo -e "${prefix}${branch} ${CYAN}üìÑ $(basename "$entry")${RESET}"
        fi
    done
}

REL_PATH="${DIR#$HOME_DIR/}"

if [[ "$DIR" == "$HOME_DIR" ]]; then
    echo -e "${GREEN}${BOLD}$USERNAME${MAGENTA} (You are here)${RESET}"
    prefix="    "  
else
    echo -e "${GREEN}${BOLD}$USERNAME${RESET}"

    IFS='/' read -ra PARTS <<< "$REL_PATH"
    prefix=""

    for ((i=0; i<${#PARTS[@]}; i++)); do
        part="${PARTS[i]}"

        if [[ $i -eq $((${#PARTS[@]} - 1)) ]]; then
            echo -e "${prefix}‚îî‚îÄ‚îÄ ${MAGENTA}${BOLD}$part (You are here)${RESET}"
            prefix="$prefix    "
        else
            echo -e "${prefix}‚îú‚îÄ‚îÄ ${BLUE}$part${RESET}"
            prefix="$prefix‚îÇ   "
        fi
    done
fi

print_tree "$DIR" "$prefix"
